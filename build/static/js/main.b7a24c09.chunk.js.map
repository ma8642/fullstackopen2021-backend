{"version":3,"sources":["components/Notification.js","components/Filter.js","components/PersonForm.js","components/Person.js","services/persons.js","App.js","index.js"],"names":["Notification","message","messageType","className","Filter","filter","handleChange","id","htmlFor","name","value","onChange","PersonForm","handleSubmit","newName","handleChangeName","newNumber","handleChangeNumber","onSubmit","type","pattern","placeholder","Person","person","handleClick","number","onClick","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","persons","setPersons","setFilter","setNewName","setNewNumber","notify","setNotify","notification","shouldDelete","setTimeout","arrayWithoutPerson","p","useEffect","personService","returnedPersons","personsToShow","length","slice","toLowerCase","event","target","preventDefault","newPerson","indexAlreadyInList","reduce","foundIdx","i","outdatedPerson","alert","window","confirm","returnedPerson","catch","err","concat","map","handleDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b7a24c09.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Notification = ({ message, messageType }) => {\n  if (message === null) {\n    return null;\n  }\n  return <div className={messageType}>{message}</div>;\n};\n\nexport default Notification;\n","import React from \"react\";\n\nconst Filter = ({ filter, handleChange }) => {\n  return (\n    <div id=\"filter-div\">\n      <label htmlFor=\"filter\">filter shown with </label>\n      <input name=\"filter\" value={filter} onChange={handleChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  handleSubmit,\n  newName,\n  handleChangeName,\n  newNumber,\n  handleChangeNumber,\n}) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"name\">name:</label>\n        <input name=\"name\" value={newName} onChange={handleChangeName} />\n      </div>\n      <div>\n        <label htmlFor=\"number\">number:</label>\n        <input\n          name=\"number\"\n          value={newNumber}\n          type=\"tel\"\n          pattern=\"\\([0-9]{3}\\) [0-9]{3}-[0-9]{4}\"\n          placeholder=\"(XXX) XXX-XXXX\"\n          onChange={handleChangeNumber}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Person = ({ person, handleClick }) => {\n  return (\n    <p>\n      {person.name} {person.number}{\" \"}\n      <button onClick={handleClick}>delete</button>\n    </p>\n  );\n};\n\nexport default Person;\n","/* eslint-disable import/no-anonymous-default-export */\nimport axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  return axios.get(baseUrl).then((response) => response.data);\n};\n\nconst createPerson = (newObject) => {\n  return axios.post(baseUrl, newObject).then((response) => response.data);\n};\n\nconst updatePerson = (id, newObject) => {\n  return axios\n    .put(`${baseUrl}/${id}`, newObject)\n    .then((response) => response.data);\n};\n\nconst deletePerson = (id) => {\n  return axios.delete(`${baseUrl}/${id}`).then((response) => response.data);\n};\n\nexport default {\n  getAll,\n  createPerson,\n  updatePerson,\n  deletePerson,\n};\n","import React, { useState, useEffect } from \"react\";\nimport Notification from \"./components/Notification\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Person from \"./components/Person\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filter, setFilter] = useState(\"\");\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [notify, setNotify] = useState({ message: null, messageType: null });\n\n  const handleChangeFilter = (event) => {\n    setFilter(event.target.value);\n  };\n\n  const handleChangeName = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleChangeNumber = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const notification = ({\n    message,\n    messageType,\n    shouldDelete = false,\n    name = \"\",\n  }) => {\n    setNotify({\n      message,\n      messageType,\n    });\n    setTimeout(() => {\n      // remove notification after 5 seconds\n      setNotify({ message: null, messageType: null });\n    }, 5000);\n    if (shouldDelete) {\n      // Delete the person from frontend\n      const arrayWithoutPerson = persons.filter((p) => p.name !== name);\n      setPersons(arrayWithoutPerson);\n    }\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const newPerson = { name: newName, number: newNumber };\n    const indexAlreadyInList = persons.reduce((foundIdx, p, i) => {\n      if (p.name.toLowerCase() === newName.toLowerCase()) {\n        foundIdx = i;\n      }\n      return foundIdx;\n    }, -1);\n    if (indexAlreadyInList >= 0) {\n      const outdatedPerson = persons[indexAlreadyInList];\n      if (outdatedPerson.number !== newNumber) {\n        const updateNumber = window.confirm(\n          `${outdatedPerson.name} is already added to phonebook, replace the old number with a new one?`\n        );\n        if (updateNumber) {\n          personService\n            .updatePerson(outdatedPerson.id, newPerson)\n            .then((returnedPerson) => {\n              setPersons([\n                ...persons.slice(0, indexAlreadyInList),\n                returnedPerson,\n                ...persons.slice(indexAlreadyInList + 1),\n              ]);\n              setNewName(\"\");\n              setNewNumber(\"\");\n              notification({\n                message: `Updated phone number for ${returnedPerson.name}!`,\n                messageType: \"notif\",\n              });\n            })\n            .catch((err) => {\n              notification({\n                message: `Information of ${newName} has already been removed from server`,\n                messageType: \"error\",\n                shouldDelete: true,\n                name: newName,\n              });\n            });\n        }\n      } else {\n        return alert(`${newName} is already added to phonebook`);\n      }\n    } else {\n      personService\n        .createPerson(newPerson)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          notification({\n            message: `Added ${returnedPerson.name}!`,\n            messageType: \"notif\",\n          });\n        })\n        .catch((err) => {\n          notification({\n            message: `Information of ${newName} has already been removed from server`,\n            messageType: \"error\",\n            shouldDelete: true,\n            name: newName,\n          });\n        });\n    }\n  };\n\n  const handleDelete = (person) => {\n    const result = window.confirm(`Delete ${person.name}?`);\n    if (result) {\n      personService.deletePerson(person.id).catch((err) => {\n        notification({\n          message: `Information of ${person.name} has already been removed from server`,\n          messageType: \"error\",\n        });\n      });\n      const arrayWithoutPerson = persons.filter((p) => p.id !== person.id);\n      setPersons(arrayWithoutPerson);\n    }\n  };\n\n  useEffect(() => {\n    personService.getAll().then((returnedPersons) => {\n      setPersons(returnedPersons);\n    });\n  }, []); // empty array ensure that effect will get called during first render\n\n  const personsToShow =\n    filter.length === 0\n      ? persons\n      : persons.filter(\n          (person) =>\n            person.name.slice(0, filter.length).toLowerCase() ===\n            filter.toLowerCase()\n        );\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={notify.message} messageType={notify.messageType} />\n      <Filter filter={filter} handleChange={handleChangeFilter} />\n      <h2>add new</h2>\n      <PersonForm\n        handleSubmit={handleSubmit}\n        newName={newName}\n        handleChangeName={handleChangeName}\n        newNumber={newNumber}\n        handleChangeNumber={handleChangeNumber}\n      />\n      <h2>Numbers</h2>\n      {personsToShow.map((person) => (\n        <Person\n          key={person.name}\n          person={person}\n          handleClick={() => handleDelete(person)}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}